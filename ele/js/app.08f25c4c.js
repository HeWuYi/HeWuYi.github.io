(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],u=0,f=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"00b4":function(t,e,s){},"00c7":function(t,e,s){"use strict";var a=s("f0a0"),n=s.n(a);n.a},"034f":function(t,e,s){"use strict";var a=s("85ec"),n=s.n(a);n.a},"0796":function(t,e,s){"use strict";var a=s("d312"),n=s.n(a);n.a},"087d":function(t,e,s){"use strict";var a=s("719e"),n=s.n(a);n.a},"08e2":function(t,e,s){"use strict";var a=s("496b"),n=s.n(a);n.a},"0c15":function(t,e,s){},"0da1":function(t,e,s){"use strict";var a=s("87ad"),n=s.n(a);n.a},"0ebd":function(t,e,s){},1124:function(t,e,s){},"14f2":function(t,e,s){"use strict";var a=s("bd42"),n=s.n(a);n.a},"150e":function(t,e,s){"use strict";var a=s("a1a7"),n=s.n(a);n.a},"1bdc":function(t,e,s){},"228f":function(t,e,s){"use strict";var a=s("9000"),n=s.n(a);n.a},"26b8":function(t,e,s){"use strict";var a=s("1124"),n=s.n(a);n.a},"295f":function(t,e,s){"use strict";var a=s("cc9a"),n=s.n(a);n.a},"30db":function(t,e,s){"use strict";var a=s("84a9"),n=s.n(a);n.a},"33b5":function(t,e,s){"use strict";var a=s("d2f0"),n=s.n(a);n.a},"411b":function(t,e,s){},4287:function(t,e,s){},"496b":function(t,e,s){},"4f44":function(t,e,s){"use strict";var a=s("eeb4"),n=s.n(a);n.a},"56d7":function(t,e,s){"use strict";s.r(e);s("d3b7"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("keep-alive",[s("router-view")],1)],1)},i=[],o=(s("ac1f"),s("1276"),{name:"app",created:function(){this.getLocation()},methods:{getLocation:function(){var t=this;AMap.plugin("AMap.Geolocation",(function(){var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4});function s(e){t.$store.dispatch("setLocation",e),t.$store.dispatch("setAddress",e.formattedAddress)}function a(e){t.getLngLatLocation()}e.getCurrentPosition(),AMap.event.addListener(e,"complete",s),AMap.event.addListener(e,"error",a)}))},getLngLatLocation:function(){var t=this;AMap.plugin("AMap.CitySearch",(function(){var e=new AMap.CitySearch;e.getLocalCity((function(e,s){"complete"===e&&"OK"===s.info&&(console.log(s),AMap.plugin("AMap.Geocoder",(function(){var e=new AMap.Geocoder({city:s.adcode}),a=s.rectangle.split(";")[0].split(",");e.getAddress(a,(function(e,a){"complete"===e&&"OK"===a.info&&(t.$store.dispatch("setLocation",{addressComponent:{city:s.city,province:s.province},formattedAddress:a.regeocode.formattedAddress}),t.$store.dispatch("setAddress",a.regeocode.formattedAddress))}))})))}))}))}}}),r=o,c=(s("034f"),s("2877")),l=Object(c["a"])(r,n,i,!1,null,null,null),d=l.exports,u=s("8c4f"),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index"},[s("router-view"),s("TabBar",{attrs:{data:t.tabbarDate}})],1)},h=[],p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tabbar"},t._l(t.data,(function(e,a){return s("router-link",{key:a,staticClass:"tab-item",attrs:{to:e.path,"active-class":"is-selected"}},[s("div",{staticClass:"tab-item-icon"},[s("i",{class:"fa fa-"+e.icon})]),s("div",{staticClass:"tab-item-label"},[t._v(t._s(e.title))])])})),1)},m=[],v={name:"tabbar",props:{data:Array}},_=v,C=(s("6fdd"),Object(c["a"])(_,p,m,!1,null,"e251fe00",null)),g=C.exports,b={name:"index",data:function(){return{tabbarDate:[{title:"首页",path:"/home",icon:"home"},{title:"订单",path:"/order",icon:"file-text-o"},{title:"我的",path:"/me",icon:"user"}]}},components:{TabBar:g}},y=b,I=(s("6f14"),Object(c["a"])(y,f,h,!1,null,"79f23af0",null)),k=I.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[t._m(0),s("InputGroup",{attrs:{type:"number",placeholder:"手机号",name:"mobile",btnTitle:t.btnTitle,disabled:t.disabled,error:t.errors.phone},on:{btnClick:t.getVerifyCode},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),s("InputGroup",{attrs:{type:"number",placeholder:"验证码",name:"verify",error:t.errors.code},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}}),t._m(1),s("div",{staticClass:"login_btn"},[s("button",{attrs:{disabled:t.isClick},on:{click:t.handleLogin}},[t._v("登陆")])])],1)},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:s("b640"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login_des"},[s("p",[t._v("新用户登陆即自动注册，表示已同意 "),s("span",[t._v("《用户服务协议》")])])])}],$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text_group"},[s("div",{staticClass:"input_group",class:{"is-invalid":t.error}},[s("input",{attrs:{type:t.type,placeholder:t.placeholder,disabled:t.disabled,name:t.name},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),t.btnTitle?s("button",{attrs:{disabled:t.disabled},on:{click:function(e){return t.$emit("btnClick")}}},[t._v(t._s(t.btnTitle))]):t._e()]),t.error?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.error))]):t._e()])},S=[],E={name:"text_gruop",props:{type:{type:String,default:"text"},placeholder:String,disabled:Boolean,value:String,btnTitle:String,error:String,name:String}},O=E,A=(s("0796"),Object(c["a"])(O,$,S,!1,null,"78f04196",null)),D=A.exports,T=s("76a0"),j=s.n(T),L={name:"login",data:function(){return{phone:"",verifyCode:"",errors:{},btnTitle:"获取验证码",disabled:!1}},computed:{isClick:function(){return!this.phone||!this.verifyCode}},methods:{handleLogin:function(){var t=this;this.errors={},this.$axios.post("/api/posts/sms_back",{phone:this.phone,code:this.verifyCode}).then((function(e){localStorage.setItem("ele_login",e.data.user._id),t.$router.push("/")})).catch((function(e){t.errors={code:e.response.data.msg}}))},getVerifyCode:function(){var t=this;this.validatePhone()&&this.$axios.post("/api/posts/sms_send",{phone:this.phone}).then((function(e){console.log(e),t.validateBtn(e.data)}))},validateBtn:function(t){var e=this,s=40,a=setInterval((function(){0==s?(clearInterval(a),e.btnTitle="获取验证码",e.disabled=!1):(e.disabled=!0,e.btnTitle=s+"秒后重试",s--)}),1e3);Object(T["Toast"])({message:"验证码为"+t.msg.substring(3,11),position:"bottom",duration:5e3})},validatePhone:function(){return this.phone?/^1[345678]\d{9}$/.test(this.phone)?(this.errors={},!0):(this.errors={phone:"手机格式错误!"},!1):(this.errors={phone:"手机号码不能为空"},!1)}},components:{InputGroup:D}},P=L,F=(s("00c7"),Object(c["a"])(P,w,x,!1,null,"f8abb4d0",null)),M=F.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("div",{staticClass:"header"},[s("div",{staticClass:"address_map",on:{click:function(e){return t.$router.push({name:"address",params:{city:t.city}})}}},[s("i",{staticClass:"fa fa-map-marker"}),s("span",[t._v(t._s(t.address))]),s("i",{staticClass:"fa fa-sort-desc"})])]),s("div",{staticClass:"search_wrap",class:{fixedview:t.showFilter},on:{click:function(e){return t.$router.push("/search")}}},[t._m(0)]),s("div",{attrs:{id:"container"}},[s("mt-swipe",{staticClass:"swiper",attrs:{auto:4e3}},t._l(t.swipeImgs,(function(t,e){return s("mt-swipe-item",{key:e},[s("img",{attrs:{src:t,alt:""}})])})),1),s("mt-swipe",{staticClass:"entries",attrs:{auto:0}},t._l(t.entries,(function(e,a){return s("mt-swipe-item",{key:a,staticClass:"entry_wrap"},t._l(e,(function(e,a){return s("div",{key:a,staticClass:"foodentry"},[s("div",{staticClass:"img_wrap"},[s("img",{attrs:{src:e.image}})]),s("span",[t._v(t._s(e.name))])])})),0)})),1)],1),s("div",{staticClass:"shoplist-title"},[t._v("推荐商家")]),s("FilterView",{attrs:{filterDate:t.filterDate},on:{searchFixed:t.showFilterView,update:t.update}}),s("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,"auto-fill":!1,bottomPullText:t.bottomPullText,bottomDropText:t.bottomDropText,bottomLoadingText:t.bottomLoadingText}},[s("div",{staticClass:"shoplist"},t._l(t.restaurants,(function(t,e){return s("IndexShow",{key:e,attrs:{restaurant:t.restaurant}})})),1)])],1)},N=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shop_search"},[s("i",{staticClass:"fa fa-search"}),t._v(" 搜索商家 商家名称 ")])}],H=(s("99af"),s("4160"),s("159b"),s("ddb0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{open:t.isSort||t.isScreen},on:{click:function(e){return e.target!==e.currentTarget?null:t.hideView(e)}}},[s("div",{staticClass:"filter_wrap"},[s("aside",{staticClass:"filter"},t._l(t.filterDate.navTab,(function(e,a){return s("div",{key:a,staticClass:"filter-nav",class:{"filter-bold":t.currentFilter==a},on:{click:function(e){return t.filterSort(a)}}},[s("span",[t._v(t._s(e.name))]),e.icon?s("i",{class:"fa fa-"+e.icon}):t._e()])})),0)]),t.isSort?s("section",{staticClass:"filter-extend"},[s("ul",t._l(t.filterDate.sortBy,(function(e,a){return s("li",{key:a,on:{click:function(s){return t.selectSort(e,a)}}},[s("span",{class:{selectName:t.currentSort==a}},[t._v(t._s(e.name))]),s("i",{directives:[{name:"show",rawName:"v-show",value:"currentSort"==a,expression:"'currentSort' == index"}],staticClass:"fa fa-check"})])})),0)]):t._e(),t.isScreen?s("section",{staticClass:"filter-extend"},[s("div",{staticClass:"filter-sort"},t._l(t.filterDate.screenBy,(function(e,a){return s("div",{key:a,staticClass:"morefilter"},[s("p",{staticClass:"title"},[t._v(t._s(e.title))]),s("ul",t._l(e.data,(function(a,n){return s("li",{key:n,class:{selected:a.select},on:{click:function(s){return t.selectScreen(a,e)}}},[a.icon?s("img",{attrs:{src:a.icon}}):t._e(),s("span",[t._v(t._s(a.name))])])})),0)])})),0),s("div",{staticClass:"morefilter-btn"},[s("span",{staticClass:"morefilter-clear",class:{edit:t.edit},on:{click:t.clearFilter}},[t._v("清空")]),s("span",{staticClass:"morefilter-ok",on:{click:t.filterOk}},[t._v("确定")])])]):t._e()])}),B=[],V=(s("b0c0"),{name:"filterView",props:{filterDate:Object},data:function(){return{currentFilter:0,isSort:!1,currentSort:0,isScreen:!1}},computed:{edit:function(){var t=!1;return this.filterDate.screenBy.forEach((function(e){e.data.forEach((function(e){e.select&&(t=!0)}))})),t}},methods:{filterSort:function(t){switch(this.currentFilter=t,t){case 0:this.isSort=!0,this.$emit("searchFixed",this.isSort);break;case 1:this.$emit("update",{condition:this.filterDate.navTab[1].condition}),this.hideView();break;case 2:this.$emit("update",{condition:this.filterDate.navTab[2].condition}),this.hideView();break;case 3:this.isScreen=!0,this.isSort=!1,this.$emit("searchFixed",this.isSort);break;default:this.hideView();break}},hideView:function(){this.isSort=!1,this.isScreen=!1,this.$emit("searchFixed",this.isSort)},selectSort:function(t,e){this.currentSort=e,this.filterDate.navTab[0].name=this.filterDate.sortBy[e].name,this.hideView(),this.$emit("update",{condition:t.code})},selectScreen:function(t,e){"MPI"!==e.id&&e.data.forEach((function(t){t.select=!1})),t.select=!t.select},clearFilter:function(){this.filterDate.screenBy.forEach((function(t){t.data.forEach((function(t){t.select=!1}))}))},filterOk:function(){var t="",e={MPI:"",offer:"",per:""};this.filterDate.screenBy.forEach((function(s){s.data.forEach((function(a){a.select&&("MPI"!==s.id?e[s.id]=a.code:(t+=a.code+",",e[s.id]=t))}))})),this.hideView(),this.$emit("update",{condition:e})}}}),G=V,U=(s("08e2"),Object(c["a"])(G,H,B,!1,null,"f7617652",null)),z=U.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"index-container"},[s("div",{staticClass:"index-shopInfo",on:{click:function(e){return t.$router.push("/shop")}}},[s("div",{staticClass:"logo_container"},[s("img",{attrs:{src:t.restaurant.image_path}})]),s("div",{staticClass:"index_main"},[s("div",{staticClass:"index_shopname"},[t.restaurant.is_premium?s("i",[t._v("品牌")]):t._e(),s("span",[t._v(t._s(t.restaurant.name))])]),s("div",{staticClass:"index-rateWrap"},[s("div",[s("Rating",{attrs:{rating:t.restaurant.rating}}),s("span",{staticClass:"rate"},[t._v(" "+t._s(t.restaurant.rating)+" ")]),s("span",[t._v("月售"+t._s(t.restaurant.recent_order_num)+"单")])],1),t.restaurant.delivery_mode?s("div",{staticClass:"delivery"},[s("span",{staticClass:"icon-hollow"},[t._v(t._s(t.restaurant.delivery_mode.text))])]):t._e()]),s("div",{staticClass:"index-moneylimit"},[s("span",[t._v("¥"+t._s(t.restaurant.float_minimum_order_amount)+"起送")]),t._v("| "),s("span",[t._v("配送费¥"+t._s(t.restaurant.float_delivery_fee))]),s("div",{staticClass:"index-distanceWrap"},[s("span",[t._v(t._s((t.restaurant.distance/1e3).toFixed(2))+"km")]),t._v(" | "),s("span",[t._v(t._s(t.restaurant.order_lead_time))])])])])])])},W=[],Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Rating-gray"},t._l(t.itemClasses,(function(t,e){return s("i",{key:e,staticClass:"fa",class:t})})),0)},J=[],q=(s("a9e3"),5),Q="fa-star",X="fa-star-half-empty",Z="fa-star-o",tt={name:"Rating-gray",props:{rating:Number},computed:{itemClasses:function(){for(var t=[],e=Math.floor(2*this.rating)/2,s=e%1!==0,a=Math.floor(e),n=0;n<a;n++)t.push(Q);s&&t.push(X);while(t.length<q)t.push(Z);return t}}},et=tt,st=(s("150e"),Object(c["a"])(et,Y,J,!1,null,"027a9650",null)),at=st.exports,nt={name:"IndexShow",props:{restaurant:Object},components:{Rating:at}},it=nt,ot=(s("14f2"),Object(c["a"])(it,K,W,!1,null,"709c48b4",null)),rt=ot.exports,ct={name:"home",data:function(){return{swipeImgs:[],entries:[],filterDate:{},showFilter:!1,page:1,size:5,restaurants:[],allLoaded:!1,bottomPullText:"上拉加载",bottomDropText:"释放加载",bottomLoadingText:"加载中途",data:""}},components:{FilterView:z,IndexShow:rt},computed:{address:function(){return this.$store.getters.address},city:function(){return this.$store.getters.location.addressComponent.city||this.$store.getters.location.addressComponent.province}},created:function(){this.getDate()},methods:{getDate:function(){var t=this;this.$axios("/api/profile/shopping").then((function(e){t.swipeImgs=e.data.swipeImgs,t.entries=e.data.entries})).catch((function(t){console.log("图片获取失败")})),this.$axios("/api/profile/filter").then((function(e){t.filterDate=e.data})),this.loadTop()},loadTop:function(){var t=this;this.page=1,this.allLoaded=!1,this.bottomPullText="上拉加载",this.$axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size),this.data).then((function(e){t.$refs.loadmore.onTopLoaded(),t.restaurants=e.data}))},loadBottom:function(){var t=this;this.allLoaded||(this.page++,this.$axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size)).then((function(e){t.$refs.loadmore.onBottomLoaded(),e.data.length>0&&e.data.forEach((function(e){t.restaurants.push(e)})),e.data,t.size,t.allLoaded=!0,t.bottomPullText="没有更多数据"})))},showFilterView:function(t){this.showFilter=t},update:function(t){this.data=t,this.loadTop()}}},lt=ct,dt=(s("e5f1"),Object(c["a"])(lt,R,N,!1,null,"2e193712",null)),ut=dt.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order"},[s("Header",{attrs:{title:"我的订单"}}),t._l(t.orderlist,(function(e,a){return s("div",{key:a,staticClass:"order-card-body"},[t.orderlist?s("div",{staticClass:"order-card-wrap",on:{click:function(s){return t.$router.push({name:"orderInfo",params:{order:e}})}}},[s("img",{attrs:{src:e.orderInfo.shopInfo.image_path}}),s("div",{staticClass:"order-card-content"},[s("div",{staticClass:"order-card-head"},[s("div",{staticClass:"title"},[s("a",[s("span",[t._v(t._s(e.orderInfo.shopInfo.name))]),s("i",{staticClass:"fa fa-angle-right"})]),s("p",[t._v("订单已完成")])]),s("p",{staticClass:"date-time"},[t._v(" "+t._s(e.date)+" ")])]),s("div",{staticClass:"order-card-detail"},[s("p",{staticClass:"detail"},[t._v(" "+t._s(e.orderInfo.selectFoods[0].name)+" ")]),s("p",{staticClass:"price"},[t._v(" ¥"+t._s(e.totalPrice)+" ")])])])]):t._e(),s("div",{staticClass:"order-card-bottom"},[t.orderlist?s("button",{staticClass:"cardbutton",on:{click:function(e){return t.$router.push("/shop")}}},[t._v("再来一单")]):t._e()])])}))],2)},ht=[],pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"headers"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLeft,expression:"isLeft"}],staticClass:"header-button is-left"},[s("i",{staticClass:"fa fa-chevron-left"}),s("button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])]),s("h1",{staticClass:"header-title"},[t._v(t._s(t.title))])])},mt=[],vt={name:"headers",props:{title:String,isLeft:{type:Boolean,default:!1}}},_t=vt,Ct=(s("6e6c"),Object(c["a"])(_t,pt,mt,!1,null,"b1417324",null)),gt=Ct.exports,bt={name:"order",data:function(){return{orderlist:[]}},beforeRouteEnter:function(t,e,s){s((function(t){t.getDate()}))},methods:{getDate:function(){var t=this;this.$axios("/api/user/orders/".concat(localStorage.ele_login)).then((function(e){console.log(e.data),t.orderlist=e.data.orderlist}))}},components:{Header:gt}},yt=bt,It=(s("4f44"),Object(c["a"])(yt,ft,ht,!1,null,"67f12940",null)),kt=It.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"me"},[s("div",{staticClass:"headInfo"},[s("div",{staticClass:"head-img"}),s("div",{staticClass:"head-profile"},[t.userInfo?s("p",{staticClass:"user-id"},[t._v(t._s(t.userInfo._id))]):s("p",{staticClass:"user-id",on:{click:t.hangleLogin}},[t._v("登陆/注册")]),s("p",{staticClass:"user-phone"},[s("i",{staticClass:"fa fa-mobile"}),t.userInfo?s("span",[t._v(t._s(t.encryptPhone(t.userInfo.phone)))]):s("span",[t._v("登陆后享受更多的特权")])])]),s("i",{staticClass:"fa fa-angle-right"})]),s("div",[s("div",{staticClass:"address-cell"},[s("i",{staticClass:"fa fa-map-marker"}),s("div",{staticClass:"address-index"},[s("span",{on:{click:t.myAdress}},[t._v("我的地址")]),s("i",{staticClass:"fa fa-angle-right"})])]),s("button",{staticClass:"loginOut-btn",on:{click:t.handleLogout}},[t._v("退出登陆")])])])},xt=[],$t=(s("5319"),{name:"me",methods:{hangleLogin:function(){this.$router.push("/login")},getDate:function(){var t=this,e=localStorage.ele_login;this.$axios("/api/user/user_info/".concat(e)).then((function(e){console.log(e.data),t.userInfo=e.data}))},encryptPhone:function(t){return t.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},handleLogout:function(){localStorage.removeItem("ele_login"),this.$router.push("/login")},myAdress:function(){this.userInfo.myAddress.length>0?this.$router.push("/myAddress"):this.$router.push({name:"addAddress",params:{title:"添加地址",addressInfo:{name:"",sex:"",bottom:"",tag:"",address:"",phone:""}}})}},data:function(){return{userInfo:""}},beforeRouteEnter:function(t,e,s){s((function(t){t.getDate()}))}}),St=$t,Et=(s("a3c1"),Object(c["a"])(St,wt,xt,!1,null,"295a57ec",null)),Ot=Et.exports,At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Address"},[s("Header",{attrs:{isLeft:!0,title:"选择收货地址"}}),s("div",{staticClass:"city_search"},[s("div",{staticClass:"search"},[s("span",{staticClass:"city",on:{click:function(e){return t.$router.push("/city")}}},[t._v(" "+t._s(t.city)+" "),s("i",{staticClass:"fa fa-angle-down"})]),s("i",{staticClass:"fa fa-search"}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search_val,expression:"search_val"}],attrs:{type:"text",placeholder:"输入具体位置"},domProps:{value:t.search_val},on:{input:function(e){e.target.composing||(t.search_val=e.target.value)}}})]),s("Location",{attrs:{address:t.address},on:{click:t.selectAddress}})],1),s("div",{staticClass:"area"},t._l(t.areaList,(function(e,a){return s("ul",{key:a,staticClass:"area_list"},[s("li",{on:{click:function(s){return t.selectAddress(e)}}},[s("h4",[t._v(t._s(e.name))]),s("p",[t._v(t._s(e.district)+t._s(e.address))])])])})),0)],1)},Dt=[],Tt=(s("841c"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title"},[t._v("当前位置")]),s("div",{staticClass:"des",on:{click:function(e){return t.$emit("click")}}},[s("i",{staticClass:"fa fa-location-arrow"}),s("span",[t._v(t._s(t.address))])])])}),jt=[],Lt={name:"me",props:{address:String}},Pt=Lt,Ft=(s("c634"),Object(c["a"])(Pt,Tt,jt,!1,null,"384056f0",null)),Mt=Ft.exports,Rt={name:"Address",components:{Header:gt,Location:Mt},data:function(){return{city:"",search_val:"",areaList:[]}},watch:{search_val:function(){this.searchPlace()}},methods:{searchPlace:function(){var t=this;AMap.plugin("AMap.Autocomplete",(function(){var e={city:t.city},s=new AMap.Autocomplete(e);s.search(t.search_val,(function(e,s){t.areaList=s.tips}))}))},selectAddress:function(t){t?this.$store.dispatch("setAddress",t.district+t.address+t.name):this.$store.dispatch("setAddress",this.address),this.$router.push("/home")}},computed:{address:function(){return this.$store.getters.location.formattedAddress}},beforeRouteEnter:function(t,e,s){s((function(e){e.city=t.params.city}))}},Nt=Rt,Ht=(s("b853"),Object(c["a"])(Nt,At,Dt,!1,null,"ff481662",null)),Bt=Ht.exports,Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"city"},[s("div",{staticClass:"search_wrap"},[s("div",{staticClass:"search"},[s("i",{staticClass:"fa fa-search"}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.city_val,expression:"city_val"}],attrs:{type:"text",placeholder:"请输入城市名"},domProps:{value:t.city_val},on:{input:function(e){e.target.composing||(t.city_val=e.target.value)}}})]),s("button",{on:{click:function(e){return t.$router.push({name:"address",params:{city:t.city}})}}},[t._v("取消")])]),0==t.searchList.length?s("div",{staticStyle:{height:"100%"}},[s("div",{staticClass:"location"},[s("Location",{attrs:{address:t.city},on:{click:function(e){return t.selectCity({name:t.city})}}})],1),s("Alphabet",{ref:"allcity",attrs:{cityInfo:t.cityInfo,keys:t.keys},on:{selectCity:t.selectCity}})],1):s("div",{staticClass:"search_list"},[s("ul",t._l(t.searchList,(function(e,a){return s("li",{key:a,on:{click:function(s){return t.selectCity(e)}}},[t._v(t._s(e.name))])})),0)])])},Gt=[],Ut=(s("4de4"),s("c975"),s("b64b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.cityInfo?s("div",{ref:"area_scroll",staticClass:"area"},[s("div",{staticClass:"scroll_wrap"},[s("div",{staticClass:"hot_wrap citylist"},[s("div",{staticClass:"title"},[t._v("热门城市")]),s("ul",{staticClass:"hot_city"},t._l(t.cityInfo.hotCities,(function(e,a){return s("li",{key:a,on:{click:function(s){return t.$emit("selectCity",e)}}},[t._v(" "+t._s(e.name))])})),0)]),s("div",{staticClass:"city_wrap"},[s("mt-index-list",t._l(t.keys,(function(e,a){return s("mt-index-section",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],key:a,attrs:{"infinite-scroll-distance":"10",index:e}},t._l(t.cityInfo[e],(function(e,a){return s("mt-cell",{key:a,attrs:{title:e.name},nativeOn:{click:function(s){return t.$emit("selectCity",e)}}})})),1)})),1)],1)])]):t._e()}),zt=[],Kt=s("1fba"),Wt={name:"alphabet",props:{cityInfo:Object,keys:Array},data:function(){return{scroll:null}},methods:{loadMore:function(){this.loading=!0}}},Yt=Wt,Jt=(s("fafa"),Object(c["a"])(Yt,Ut,zt,!1,null,"aa3c210a",null)),qt=Jt.exports,Qt={name:"city",data:function(){return{city_val:"",cityInfo:{},keys:[],allCities:[],searchList:[]}},computed:{city:function(){return this.$store.getters.location.addressComponent.city||this.$store.getters.location.addressComponent.province}},components:{Location:Mt,Alphabet:qt},created:function(){this.getCityInfo()},watch:{city_val:function(){this.searchCity()}},methods:{getCityInfo:function(){var t=this;this.$axios("/api/posts/cities").then((function(e){t.cityInfo=e.data,t.keys=Object.keys(e.data),t.keys.pop(),t.keys.sort(),t.keys.forEach((function(e){t.cityInfo[e].forEach((function(e){t.allCities.push(e)}))}))})).catch((function(t){console.log(t)}))},selectCity:function(t){this.$router.push({name:"address",params:{city:t.name}})},searchCity:function(){var t=this;0==this.city_val?this.searchList=[]:this.searchList=this.allCities.filter((function(e){return-1!=e.name.indexOf(t.city_val)}))}}},Xt=Qt,Zt=(s("b328"),Object(c["a"])(Xt,Vt,Gt,!1,null,"c870f494",null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("Header",{attrs:{isLeft:!0,title:"搜索"}}),s("div",{staticClass:"search_header"},[s("form",{staticClass:"search_wrap",attrs:{action:""}},[s("i",{staticClass:"fa fa-search"}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.key_word,expression:"key_word"}],attrs:{type:"text",placeholder:"商家信息"},domProps:{value:t.key_word},on:{input:function(e){e.target.composing||(t.key_word=e.target.value)}}}),s("button",{on:{click:function(e){return e.preventDefault(),t.searchHandle(e)}}},[t._v("搜索")])]),t.result&&!t.showShop?s("div",{staticClass:"shop"},[t.empty?s("div",{staticClass:"empty_wrap"},[t._m(0)]):s("div",[s("searchIndex",{attrs:{data:t.result.restaurants},on:{click:function(e){return t.$router.push("/shop")}}}),s("searchIndex",{attrs:{data:t.result.words},on:{click:t.shopItemClick}})],1)]):t._e(),t.showShop?s("div",{staticClass:"container"},[s("FilterView",{attrs:{filterDate:t.filterDate},on:{update:t.update}}),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"shoplist",attrs:{"infinite-scroll-disabled":t.loading}},t._l(t.restaurants,(function(t,e){return s("IndexShow",{key:e,attrs:{restaurant:t.restaurant}})})),1)],1):t._e()])],1)},se=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"emoty_txt"},[s("h4",[t._v("此搜索词未有结果")])])}],ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"search_list"},t._l(t.data,(function(e,a){return s("li",{key:a,on:{click:function(e){return t.$emit("click")}}},[e.image_path?s("img",{attrs:{src:e.image_path}}):s("i",{staticClass:"fa fa-search"}),s("div",{staticClass:"shopitem"},[s("span",{staticClass:"title"},[t._v(t._s(e.name||e))]),e.rating?s("span",{staticClass:"rating"},[t._v(" 评分:"+t._s(e.rating)+" ")]):t._e()])])})),0)},ne=[],ie={name:"searchIndex",props:{data:Array}},oe=ie,re=(s("af5b"),Object(c["a"])(oe,ae,ne,!1,null,"5839238e",null)),ce=re.exports,le={name:"search",data:function(){return{key_word:"",result:null,empty:!1,showShop:!1,filterDate:[],page:0,size:7,restaurants:[],loading:!1,data:null}},watch:{key_word:function(){this.empty=!1,this.showShop=!1,this.keyWordChang()}},created:function(){var t=this;this.$axios("/api/profile/filter").then((function(e){t.filterDate=e.data}))},methods:{keyWordChang:function(){var t=this;this.$axios("/api/profile/typeahead/".concat(this.key_word)).then((function(e){t.result=e.data,console.log(e.data)})).catch((function(e){console.log(e),t.result=null}))},searchHandle:function(){this.key_word&&(this.result&&(this.result.restaurants.length>0||this.result.words>0)?(this.empty=!1,this.shopItemClick()):this.empty=!0)},shopItemClick:function(){this.showShop=!0,this.page=0,this.restaurants=[],this.loading=!1},update:function(t){this.data=t,this.shopItemClick()},loadMore:function(){var t=this;this.page++,this.$axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size),this.data).then((function(e){e.data.length>0?e.data.forEach((function(e){t.restaurants.push(e)})):t.loading=!0}))}},components:{Header:gt,searchIndex:ce,FilterView:z,IndexShow:rt}},de=le,ue=(s("0da1"),Object(c["a"])(de,ee,se,!1,null,"a8923616",null)),fe=ue.exports,he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.shopInfo?s("div",{staticClass:"shop"},[s("div",{staticClass:"header-nav"},[s("div",{staticClass:"nav_bg"},[s("img",{attrs:{src:t.shopInfo.rst.scheme}})]),s("div",{staticClass:"nav_back"},[s("i",{staticClass:"fa fa-chevron-left",on:{click:function(e){return t.$router.push("/home")}}})]),s("div",{staticClass:"shop_image"},[s("img",{attrs:{src:t.shopInfo.rst.image_path}})])]),s("div",{staticClass:"index-rst"},[s("div",{staticClass:"rst-name"},[s("span",{on:{click:function(e){t.showInfoModel=!0}}},[t._v(t._s(t.shopInfo.rst.name))]),s("i",{staticClass:"fa fa-caret-right"})]),s("infoModel",{attrs:{showInfoModel:t.showInfoModel,rst:t.shopInfo.rst},on:{close:function(e){t.showInfoModel=!1}}}),s("div",{staticClass:"rst-order"},[s("span",[t._v("评分"+t._s(t.shopInfo.rst.rating))]),s("span",[t._v("月售"+t._s(t.shopInfo.rst.recent_order_num)+"单")]),s("span",[t._v("蜂鸟专送约"+t._s(t.shopInfo.rst.order_lead_time)+"分钟")])]),s("Activity",{attrs:{activities:t.shopInfo.rst.activities}}),s("p",{staticClass:"rst-promotion"},[t._v(" 公告:"+t._s(t.shopInfo.rst.promotion_info)+" ")])],1),s("NavBar"),s("keep-alive",[s("router-view")],1)],1):t._e()},pe=[],me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showInfoModel,expression:"showInfoModel"}],staticClass:"info-model"},[s("div",{staticClass:"brief-modal"},[s("h2",[t.rst.is_premium?s("i",[t._v("品牌")]):t._e(),s("span",[t._v(t._s(t.rst.name))])]),s("ul",[s("li",[s("h3",[t._v(t._s(t.rst.rating))]),s("p",[t._v("评分")])]),s("li",[s("h3",[t._v(t._s(t.rst.recent_order_num)+"单")]),s("p",[t._v("月售")])]),t.rst.delivery_mode?s("li",[s("h3",[t._v("蜂鸟专送")]),s("p",[t._v("约"+t._s(t.rst.order_lead_time)+"分钟")])]):t._e(),s("li",[s("h3",[t._v("¥"+t._s(t.rst.float_delivery_fee)+"元")]),s("p",[t._v("配送费")])]),s("li",[s("h3",[t._v(t._s((t.rst.distance/1e3).toFixed(2))+"km")]),s("p",[t._v("距离")])])]),s("h3",{staticClass:"promotion"},[s("span",[t._v("公告")]),s("p",{staticClass:"brief-modal-yx"},[t._v(t._s(t.rst.promotion_info))])])]),s("div",{staticClass:"brief-modal-close",on:{click:function(e){return t.$emit("close")}}},[s("img",{attrs:{src:"https://fuss10.elemecdn.com/8/ba/bcfa8cc62b20e044bd2ea1c1c7f3dpng.png?imageMogr/format/webp/"}})])])])},ve=[],_e={name:"infoModel",props:{rst:Object,showInfoModel:Boolean}},Ce=_e,ge=(s("ffff"),Object(c["a"])(Ce,me,ve,!1,null,"166594cb",null)),be=ge.exports,ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rst-activity"},[s("div",{staticClass:"activity-txt"},[s("span",{style:{background:"#"+t.activities[0].icon_color}},[t._v(t._s(t.activities[0].icon_name))]),s("span",[t._v(t._s(t.activities[0].description))])]),s("div",{staticClass:"activity-count"},[s("span",{on:{click:function(e){t.showSheet=!0}}},[t._v(t._s(t.activities.length)+"个优惠")]),s("i",{staticClass:"fa fa-caret-down"})]),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSheet,expression:"showSheet"}],staticClass:"act-model"},[s("div",{staticClass:"activity-sheet"},[s("i",{staticClass:"fa fa-remove",on:{click:function(e){t.showSheet=!1}}}),s("h2",[t._v("优惠活动")]),s("ul",t._l(t.activities,(function(e,a){return s("li",{key:a},[s("span",{style:{background:"#"+e.icon_color}},[t._v(t._s(e.icon_name))]),s("span",[t._v(t._s(e.description))])])})),0)])])])],1)},Ie=[],ke={name:"activity",props:{activities:Array},data:function(){return{showSheet:!1}}},we=ke,xe=(s("c614"),Object(c["a"])(we,ye,Ie,!1,null,"5e8550b9",null)),$e=xe.exports,Se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav"},[s("router-link",{staticClass:"nav-item",attrs:{to:"/goods"}},[t._v(" 点餐 "),s("i",{staticClass:"line"})]),s("router-link",{staticClass:"nav-item",attrs:{to:"/comments"}},[t._v(" 评价 "),s("i",{staticClass:"line"})]),s("router-link",{staticClass:"nav-item",attrs:{to:"/seller"}},[t._v(" 商家 "),s("i",{staticClass:"line"})])],1)},Ee=[],Oe={name:"navbar"},Ae=Oe,De=(s("59da"),Object(c["a"])(Ae,Se,Ee,!1,null,"e5046372",null)),Te=De.exports,je={name:"shop",data:function(){return{shopInfo:null,showInfoModel:!1}},created:function(){this.getDate()},methods:{getDate:function(){var t=this;this.$axios("/api/profile/batch_shop").then((function(e){console.log(e.data),t.shopInfo=e.data}))}},components:{infoModel:be,Activity:$e,NavBar:Te}},Le=je,Pe=(s("59b3"),Object(c["a"])(Le,he,pe,!1,null,"8ee13732",null)),Fe=Pe.exports,Me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.shopInfo?s("div",{staticClass:"goods"},[t._l(t.shopInfo.recommend,(function(e,a){return s("div",{key:a,staticClass:"recommend"},[s("p",{staticClass:"recommend-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"recommend-wrap"},[s("ul",t._l(e.items,(function(e,a){return s("li",{key:a},[s("img",{attrs:{src:e.image_path}}),s("div",{staticClass:"recommend-food"},[s("p",{staticClass:"recommend-food-name"},[t._v(t._s(e.name))]),s("p",{staticClass:"recommend-food-zm"},[t._v(" 月售"+t._s(e.month_sales)+" 好评率"+t._s(e.satisfy_rate))])]),s("div",{staticClass:"recommend-food-price"},[s("p",[t._v("¥"+t._s(e.activity.fixed_price))]),s("cartControll",{attrs:{food:e}})],1)])})),0)])])})),s("div",{staticClass:"menuview"},[s("div",{ref:"menuScroll",staticClass:"menu-wrapper"},[s("ul",t._l(t.shopInfo.menu,(function(e,a){return s("li",{key:a,class:{current:t.currentIndex===a},on:{click:function(e){return t.selectMenu(a)}}},[e.icon_url?s("img",{attrs:{src:e.icon_url,alt:""}}):t._e(),s("span",[t._v(t._s(e.name))])])})),0)]),s("div",{ref:"foodScroll",staticClass:"foods-wrapper"},[s("ul",t._l(t.shopInfo.menu,(function(e,a){return s("li",{key:a,staticClass:"food-list-hook"},[s("div",{staticClass:"category-title"},[s("strong",[t._v(t._s(e.name))]),s("span",[t._v(t._s(e.description))])]),t._l(e.foods,(function(e,a){return s("div",{key:a,staticClass:"fooddetails",on:{click:function(s){return t.handelFood(e)}}},[s("img",{attrs:{src:e.image_path,alt:""}}),s("section",{staticClass:"fooddetails-info"},[s("h4",[t._v(t._s(e.name))]),s("p",{staticClass:"fooddetails-des"},[t._v(t._s(e.description))]),s("p",{staticClass:"fooddetails-sales"},[t._v("月售"+t._s(e.month_sales)+"份 好评率"+t._s(e.satisfy_rate))]),s("div",{staticClass:"fooddetails-price"},[s("span",{staticClass:"price"},[t._v("¥"+t._s(e.activity.fixed_price))]),s("cartControll",{attrs:{food:e}})],1)])])}))],2)})),0)])]),s("shopCart",{attrs:{shopInfo:t.shopInfo}}),s("Food",{attrs:{isShow:t.showFood,food:t.selectFood},on:{close:function(e){t.showFood=!1}}})],2):t._e()},Re=[],Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontroll"},[t.food.count>0?s("span",{staticClass:"cartbutton button-minus",on:{click:function(e){return e.stopPropagation(),t.decreaseCount(e)}}},[s("i",{staticClass:"fa fa-minus"})]):t._e(),t.food.count>0?s("span",{staticClass:"cartcount"},[t._v(" "+t._s(t.food.count)+" ")]):t._e(),s("span",{staticClass:"cartbutton",on:{click:function(e){return e.stopPropagation(),t.increaseCount(e)}}},[s("i",{staticClass:"fa fa-plus-circle"})])])},He=[],Be={name:"cartcontroll",props:{food:Object},methods:{decreaseCount:function(){this.food.count--},increaseCount:function(){this.food.count++}}},Ve=Be,Ge=(s("30db"),Object(c["a"])(Ve,Ne,He,!1,null,"39574be1",null)),Ue=Ge.exports,ze=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shopcart"},[s("transition",{attrs:{name:"fade"}},[t.showCartView&&!t.isEmpty?s("div",{staticClass:"cartview-cartmask",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.showCartView=!1}}},[s("div",{staticClass:"cartview-cartbody"},[s("div",{staticClass:"cartview-cartheader"},[s("span",[t._v("已选商品")]),s("button",{on:{click:t.clearFoods}},[t._v("清空")])]),s("div",{staticClass:"entityList-cartbodyScroller"},[s("ul",{staticClass:"entityList-cartlist"},t._l(t.selectFoods,(function(e,a){return s("li",{key:a,staticClass:"entityList-entityrow"},[s("h4",[s("span",[t._v(t._s(e.name))])]),s("span",{staticClass:"entityList-entitytotal"},[t._v(t._s(e.activity.fixed_price))]),s("cartControll",{attrs:{food:e}})],1)})),0)])])]):t._e()]),s("div",{staticClass:"bottomNav-cartfooter",class:{"bottomNav-carticon-empty":t.isEmpty}},[s("span",{staticClass:"bottomNav-carticon",on:{click:function(e){t.showCartView=!t.showCartView}}},[s("i",{staticClass:"fa fa-cart-plus"}),t.totalCount?s("span",[t._v(t._s(t.totalCount))]):t._e()]),s("div",{staticClass:"bottomNav-cartInfo",on:{click:function(e){t.showCartView=!t.showCartView}}},[s("p",{staticClass:"bottomNav-carttotal"},[t.isEmpty?s("span",[t._v("未选购商品")]):s("span",[t._v("¥"+t._s(t.totalPrice.toFixed(2)))])]),s("p",{staticClass:"bottomNav-cartdelivery"},[t._v(" 另需配送费"+t._s(t.shopInfo.rst.float_delivery_fee)+" ")])]),s("button",{staticClass:"submit-btn"},[t.isEmpty?s("span",[t._v("¥"+t._s(t.shopInfo.rst.float_minimum_order_amount)+"元起送")]):s("span",{on:{click:t.settlement}},[t._v("去结算")])])])],1)},Ke=[],We={name:"shopSort",props:{shopInfo:Object},data:function(){return{totalCount:0,totalPrice:0,selectFoods:[],showCartView:!1}},computed:{isEmpty:function(){var t=!0,e=this;return e.totalCount=0,e.totalPrice=0,e.selectFoods=[],e.shopInfo.recommend.forEach((function(s){s.items.forEach((function(s){s.count&&(t=!1,e.totalCount+=s.count,e.totalPrice+=s.activity.fixed_price*s.count,e.selectFoods.push(s))}))})),e.shopInfo.menu.forEach((function(s){s.foods.forEach((function(s){s.count&&(t=!1,e.totalCount+=s.count,e.totalPrice+=s.activity.fixed_price*s.count,e.selectFoods.push(s))}))})),console.log(this.selectFoods),t}},components:{cartControll:Ue},methods:{clearFoods:function(){this.shopInfo.recommend.forEach((function(t){t.items.forEach((function(t){t.count=0}))})),this.shopInfo.menu.forEach((function(t){t.foods.forEach((function(t){t.count=0}))}))},settlement:function(){this.$store.dispatch("setOrder_info",{shopInfo:this.shopInfo.rst,selectFoods:this.selectFoods}),this.$router.push("/Settlement")}}},Ye=We,Je=(s("f088"),Object(c["a"])(Ye,ze,Ke,!1,null,"6e0147e4",null)),qe=Je.exports,Qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"move"}},[t.isShow?s("div",{staticClass:"food"},[s("div",{staticClass:"foodpanel-close"},[s("img",{attrs:{src:"https://fuss10.elemecdn.com/8/ba/bcfa8cc62b20e044bd2ea1c1c7f3dpng.png?imageMogr/format/webp/"},on:{click:function(e){return t.$emit("close")}}})]),s("div",{staticClass:"foodpanel-body"},[s("div",{staticClass:"foodpanel-foodimg"},[s("img",{attrs:{src:t.food.image_path,alt:""}})]),s("div",{staticClass:"foodpanel-foodinfo"},[s("h4",[t._v(t._s(t.food.name))]),s("div",{staticClass:"foodpanel-foodsales"},[s("span",[t._v("月售"+t._s(t.food.month_sales))]),s("span",[t._v("好评率"+t._s(t.food.satisfy_rate)+"%")])]),s("div",{staticClass:"foodpanel-priceLine"},[s("span",[t._v("¥"+t._s(t.food.activity.fixed_price))]),s("cartControll",{staticClass:"cart-btn",attrs:{food:t.food}})],1),s("p",[t._v(t._s(t.food.description))])])])]):t._e()])},Xe=[],Ze={name:"food",props:{food:Object,isShow:Boolean},components:{cartControll:Ue}},ts=Ze,es=(s("b78d"),Object(c["a"])(ts,Qe,Xe,!1,null,"239fba3d",null)),ss=es.exports,as={name:"Goods",data:function(){return{shopInfo:null,menuScroll:{},foodScroll:{},scrollY:0,listHeight:[],selectFood:null,showFood:!1}},created:function(){this.getDate()},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(this.scrollY>=e&&this.scrollY<s)return t}return 0}},methods:{getDate:function(){var t=this;this.$axios("/api/profile/batch_shop").then((function(e){e.data.recommend.forEach((function(t){t.items.forEach((function(t){t.count=0}))})),e.data.menu.forEach((function(t){t.foods.forEach((function(t){t.count=0}))})),console.log(e.data),t.shopInfo=e.data,t.$nextTick((function(){t.initScroll(),t.calulateHeight()}))}))},initScroll:function(){var t=this;this.menuScroll=new Kt["a"](this.$refs.menuScroll,{click:!0}),this.foodScroll=new Kt["a"](this.$refs.foodScroll,{probeType:3,click:!0}),this.foodScroll.on("scroll",(function(e){t.scrollY=Math.abs(Math.round(e.y))}))},selectMenu:function(t){var e=this.$refs.foodScroll.getElementsByClassName("food-list-hook"),s=e[t];this.foodScroll.scrollToElement(s,250)},calulateHeight:function(){var t=this.$refs.foodScroll.getElementsByClassName("food-list-hook"),e=0;this.listHeight.push(e);for(var s=0;s<t.length-1;s++){var a=t[s];e+=a.clientHeight,this.listHeight.push(e)}},handelFood:function(t){console.log(t),this.selectFood=t,this.showFood=!0}},components:{cartControll:Ue,shopCart:qe,Food:ss}},ns=as,is=(s("e556"),Object(c["a"])(ns,Me,Re,!1,null,"76b55341",null)),os=is.exports,rs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.evaluation?s("div",{staticClass:"Comments"},[s("section",{staticClass:"rating-wrap"},[s("div",{staticClass:"rating-info"},[s("h4",[t._v(t._s(t.evaluation.rating.shop_score.toFixed(1)))]),s("div",{staticClass:"shop-score"},[s("span",[t._v("商家评分")]),s("Rating",{attrs:{rating:t.evaluation.rating.shop_score}})],1)]),s("div",{staticClass:"other-score"},[s("div",{staticClass:"tp-score"},[s("div",[s("span",[t._v("味道")]),s("p",[t._v(t._s(t.evaluation.rating.taste_score.toFixed(1)))])]),s("div",[s("span",[t._v("包装")]),s("p",[t._v(t._s(t.evaluation.rating.package_score.toFixed(1)))])])]),s("div",{staticClass:"rider-score"},[s("span",[t._v("配送")]),s("p",[t._v(t._s(t.evaluation.rating.rider_score.toFixed(1)))])])])]),s("div",{staticClass:"shop-info"},[s("ul",{staticClass:"tags"},t._l(t.evaluation.tags,(function(e,a){return s("li",{key:a,class:{unsatisfied:t.evaluation.tags.unsatisfied}},[t._v(" "+t._s(e.name)+" "),e.count>0?s("span",[t._v(t._s(e.count))]):t._e()])})),0),s("ul",{staticClass:"comments-wrap"},t._l(t.evaluation.comments,(function(e,a){return s("li",{key:a},[s("div",{staticClass:"comment-user"},[s("img",{attrs:{src:t.evaluation.comments.avatar||"https://shadow.elemecdn.com/faas/h5/static/sprite.3ffb5d8.png"}})]),s("div",{staticClass:"comments-info"},[s("div",{staticClass:"comment-name"},[s("h4",[t._v(t._s(e.username))]),s("small",[t._v(" "+t._s(e.rated_at)+" ")])]),s("div",{staticClass:"comment-rating"},[s("Rating",{attrs:{rating:e.rating}}),s("span",{style:{color:t.ratingcontent(e.rating).color}},[t._v(" "+t._s(t.ratingcontent(e.rating).txt)+" ")])],1),s("div",{staticClass:"comment-text"},[t._v(" 评论文本 ")]),s("div",{staticClass:"comment-reply"},[t._v(t._s(e.reply.content))]),s("ul",{staticClass:"comment-imgs"},t._l(e.order_images,(function(t,e){return s("li",{key:e},[s("img",{attrs:{src:t.image_hash,alt:""}})])})),0)])])})),0)])]):t._e()},cs=[],ls={name:"Comments",data:function(){return{evaluation:null}},created:function(){this.getDate()},methods:{getDate:function(){var t=this;this.$axios("/api/profile/comments").then((function(e){t.evaluation=e.data,console.log(e.data)}))},ratingcontent:function(t){var e=[{txt:"吐槽",color:"rgba(137,159,188)"},{txt:"较差",color:"rgba(137,159,188)"},{txt:"一般",color:"rgba(251,154,11)"},{txt:"满意",color:"rgba(251,154,11)"},{txt:"超赞",color:"rgba(255,96,0)"}];return e[t-1]}},components:{Rating:at}},ds=ls,us=(s("b7ea"),Object(c["a"])(ds,rs,cs,!1,null,"5970d500",null)),fs=us.exports,hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.sellerInfo?s("div",{staticClass:"seller"},[s("section",[s("img",{attrs:{src:t.sellerInfo.header_image,alt:""}}),s("h3",[t._v(t._s(t.sellerInfo.title))]),s("p",[t._v(t._s(t.sellerInfo.brand_intros[0].brief))]),s("div",[t._v("查看品牌故事")])])]):t._e()},ps=[],ms={name:"Seller",data:function(){return{sellerInfo:null}},created:function(){this.getDate()},methods:{getDate:function(){var t=this;this.$axios("/api/profile/seller").then((function(e){t.sellerInfo=e.data,console.log(t.sellerInfo)}))}}},vs=ms,_s=(s("228f"),Object(c["a"])(vs,hs,ps,!1,null,"50afa1bb",null)),Cs=_s.exports,gs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"myAddress"},[s("Header",{attrs:{isLeft:!0,title:t.title}}),s("div",{staticClass:"address-view"},t._l(t.allAddress,(function(e,a){return s("div",{key:a,staticClass:"address-card"},[s("div",{staticClass:"address-card-select"},[t.selectIndex==a?s("i",{staticClass:"fa fa-check-circle"}):t._e()]),s("div",{staticClass:"address-card-body",on:{click:function(s){return t.setAddressInfo(e,a)}}},[s("p",{staticClass:"address-card-title"},[s("span",{staticClass:"username"},[t._v(t._s(e.name))]),e.sex?s("span",{staticClass:"gender"},[t._v(t._s(e.sex))]):t._e(),s("span",{staticClass:"user-phone"},[t._v(t._s(e.phone))])]),s("p",{staticClass:"address-card-address"},[e.tag?s("span",{staticClass:"tag"},[t._v(t._s(e.tag))]):t._e(),s("span",{staticClass:"address-text"},[t._v(t._s(e.address))])])]),s("div",{staticClass:"address-card-edit"},[s("i",{staticClass:"fa fa-edit",on:{click:function(s){return t.handleEdit(e)}}}),s("i",{staticClass:"fa fa-close",on:{click:function(s){return t.handleDetele(e,a)}}})])])})),0),s("div",{staticClass:"address-view-bottom",on:{click:t.addAddress}},[s("i",{staticClass:"fa fa-plus-circle"}),s("span",[t._v("新增地址")])])],1)},bs=[],ys=(s("a434"),{name:"myAddress",components:{Header:gt},data:function(){return{title:"我的地址",allAddress:[],selectIndex:0}},beforeRouteEnter:function(t,e,s){s((function(t){t.getDate()}))},methods:{addAddress:function(){this.$router.push({name:"addAddress",params:{title:"添加地址",addressInfo:{name:"",sex:"",bottom:"",tag:"",address:"",phone:""}}})},getDate:function(){var t=this;this.$axios("/api/user/user_info/".concat(localStorage.ele_login)).then((function(e){t.allAddress=e.data.myAddress,console.log(t.allAddress)}))},handleEdit:function(t){this.$router.push({name:"addAddress",params:{title:"编辑地址",addressInfo:t}})},handleDetele:function(t,e){var s=this;this.$axios.delete("/api/user/address/".concat(localStorage.ele_login,"/").concat(t._id),t).then((function(t){s.allAddress.splice(e,1)}))},setAddressInfo:function(t,e){this.selectIndex=e,this.$store.dispatch("setUser_info",t),this.$router.push("/Settlement")}}}),Is=ys,ks=(s("33b5"),Object(c["a"])(Is,gs,bs,!1,null,"6d52b280",null)),ws=ks.exports,xs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addAddress"},[s("Header",{attrs:{isLeft:!0,title:t.title}}),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showSearch,expression:"!showSearch"}],staticClass:"viewbody"},[s("div",{staticClass:"content"},[s("formBlock",{attrs:{tags:t.sexes,label:"联系人",placeholder:"姓名",sex:t.addressInfo.sex},on:{checkSex:t.checkSex},model:{value:t.addressInfo.name,callback:function(e){t.$set(t.addressInfo,"name",e)},expression:"addressInfo.name"}}),s("formBlock",{attrs:{label:"电话",placeholder:"手机号码"},model:{value:t.addressInfo.phone,callback:function(e){t.$set(t.addressInfo,"phone",e)},expression:"addressInfo.phone"}}),s("formBlock",{attrs:{label:"地址",placeholder:"小区/写字楼/学校等",icon:"angle-right"},on:{click:function(e){t.showSearch=!0}},model:{value:t.addressInfo.address,callback:function(e){t.$set(t.addressInfo,"address",e)},expression:"addressInfo.address"}}),s("formBlock",{attrs:{textarea:"textarea",label:"门牌号",placeholder:"10号楼5单元404",icon:"edit"},model:{value:t.addressInfo.bottom,callback:function(e){t.$set(t.addressInfo,"bottom",e)},expression:"addressInfo.bottom"}}),t._m(0),s("tabTag",{attrs:{tags:t.tags,selectTag:t.addressInfo.tag},on:{checkTag:t.checkTag}})],1),s("div",{staticClass:"form-button-wrap"},[s("button",{staticClass:"form-button",on:{click:t.handleSave}},[t._v("确定")])])]),s("addressSearch",{attrs:{addressInfo:t.addressInfo,showSearch:t.showSearch},on:{close:function(e){t.showSearch=!1}}})],1)},$s=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"formblock"},[s("div",{staticClass:"label-wrap"},[t._v("标签")])])}],Ss=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"formblock"},[s("div",{staticClass:"label-wrap"},[t._v(" "+t._s(t.label)+" ")]),s("div",{staticClass:"input-group-wrap",on:{click:function(e){return t.$emit("click")}}},[s("div",{staticClass:"input-wrap"},[t.textarea?s("textarea",{attrs:{placeholder:t.placeholder,maxlength:"100",rows:"2"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}):s("input",{attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),s("i",{class:"fa fa-"+t.icon})]),t.tags?s("tabTag",{attrs:{selectTag:t.sex,tags:t.tags},on:{checkTag:t.checkTag}}):t._e()],1)])},Es=[],Os=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-wrap"},t._l(t.tags,(function(e,a){return s("span",{key:a,staticClass:"form-span",class:{checked:t.selectTag==e},on:{click:function(s){return t.$emit("checkTag",e)}}},[t._v(" "+t._s(e)+" ")])})),0)},As=[],Ds={name:"tabTag",props:{tags:Array,selectTag:String}},Ts=Ds,js=(s("df58"),Object(c["a"])(Ts,Os,As,!1,null,"001850d8",null)),Ls=js.exports,Ps={name:"formblock",props:{type:{type:String,default:"text"},label:String,placeholder:String,value:String,textarea:String,icon:String,tags:Array,sex:String},methods:{checkTag:function(t){this.$emit("checkSex",t)}},components:{tabTag:Ls}},Fs=Ps,Ms=(s("087d"),Object(c["a"])(Fs,Ss,Es,!1,null,"b4ce9a8e",null)),Rs=Ms.exports,Ns=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showSearch?s("div",{staticClass:"addressSearch"},[s("div",{staticClass:"search-view"},[s("div",{staticClass:"search-box"},[s("div",{staticClass:"search-box-input"},[s("i",{staticClass:"fa fa-search"}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search_address,expression:"search_address"}],attrs:{type:"text",placeholder:"请输入小区/写字楼/学校等"},domProps:{value:t.search_address},on:{input:function(e){e.target.composing||(t.search_address=e.target.value)}}})]),s("button",{staticClass:"search-box-btn",on:{click:function(e){return t.$emit("close")}}},[t._v("取消")])]),s("ul",{staticClass:"search-list"},t._l(t.arealist,(function(e,a){return s("li",{key:a,staticClass:"search-row",on:{click:function(s){return t.selectAddress(e)}}},[s("p",{staticClass:"search-row-title"},[t._v(t._s(e.name))]),s("p",{staticClass:"search-row-location"},[t._v(t._s(e.district)+t._s(e.address))])])})),0)])]):t._e()},Hs=[],Bs={name:"addressSearch",data:function(){return{search_address:"",arealist:[]}},components:{city:function(){return this.$store.getters.location.addressComponent.city||this.$store.getters.location.addressComponent.province}},props:{showSearch:Boolean,addressInfo:Object},watch:{search_address:function(t){this.searchPlace(t)}},methods:{searchPlace:function(t){var e=this;AMap.plugin("AMap.Autocomplete",(function(){var s={city:e.city},a=new AMap.Autocomplete(s);a.search(t,(function(t,s){e.arealist=s.tips}))}))},selectAddress:function(t){this.addressInfo.address=t.name+t.district+t.address,this.$emit("close")}}},Vs=Bs,Gs=(s("d89c"),Object(c["a"])(Vs,Ns,Hs,!1,null,"539a89d0",null)),Us=Gs.exports,zs={name:"addAddress",components:{Header:gt,formBlock:Rs,tabTag:Ls,addressSearch:Us},data:function(){return{title:"",tags:["家","学校","公司"],sexes:["先生","女士"],addressInfo:{},showSearch:!1}},beforeRouteEnter:function(t,e,s){s((function(e){e.title=t.params.title,e.addressInfo=t.params.addressInfo}))},methods:{checkTag:function(t){this.addressInfo.tag=t},checkSex:function(t){this.addressInfo.sex=t},handleSave:function(){this.addressInfo.name?this.addressInfo.phone?this.addressInfo.address?(console.log(this.addressInfo),"添加地址"==this.title?this.addaddress():this.editAddress()):this.showMsg("请输入地址"):this.showMsg("请输入电话"):this.showMsg("请输入联系人")},showMsg:function(t){Object(T["Toast"])({message:t,position:"bottom",duration:2e3})},addaddress:function(){var t=this;this.$axios.post("/api/user/add_address/".concat(localStorage.ele_login),this.addressInfo).then((function(e){t.$store.getters.userInfo||t.$store.dispatch("setUser_info",t.addressInfo),t.$router.push("/myAddress")})).catch((function(t){console.log(t)}))},editAddress:function(){var t=this;this.$axios.post("/api/user/edit_address/".concat(localStorage.ele_login,"/").concat(this.addressInfo._id),this.addressInfo).then((function(e){t.$router.push("/myAddress")}))}}},Ks=zs,Ws=(s("26b8"),Object(c["a"])(Ks,xs,$s,!1,null,"68341547",null)),Ys=Ws.exports,Js=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"settlement"},[s("Header",{attrs:{isLeft:!0,title:"确定订单"}}),s("div",{staticClass:"view-body"},[s("section",{staticClass:"cart-address"},[s("p",{staticClass:"title"},[t._v("订单配送至 "),t.userInfo&&t.userInfo.tag?s("span",{staticClass:"address-tag"},[t._v(" "+t._s(t.userInfo.tag)+" ")]):t._e()]),s("p",{staticClass:"address-detail"},[t.userInfo?s("span",{on:{click:function(e){return t.$router.push("/myAddress")}}},[t._v(t._s(t.userInfo.address)+t._s(t.userInfo.bottom))]):s("span",[t.haveAddress?s("span",{on:{click:function(e){return t.$router.push("/myAddress")}}},[t._v("选择收货地址")]):s("span",{on:{click:t.addAddress}},[t._v("新增地址")])]),s("i",{staticClass:"fa fa-angle-right"})]),t.userInfo?s("h2",{staticClass:"address-name"},[s("span",[t._v(t._s(t.userInfo.name))]),t.userInfo.sex?s("span",[t._v("("+t._s(t.userInfo.sex)+")")]):t._e(),s("span",{staticClass:"phone"},[t._v(t._s(t.userInfo.phone))])]):t._e()]),s("Delivery",{attrs:{shopInfo:t.orderInfo.shopInfo}}),s("CartGroup",{attrs:{orderInfo:t.orderInfo,totalPrice:t.totalPrice}}),s("section",{staticClass:"checkout-section"},[s("Cartitem",{attrs:{title:"餐具分数",subHead:t.remarkInfo.tableware||"未选择"},on:{click:function(e){t.showTableware=!0}}}),s("Cartitem",{attrs:{title:"订单备份",subHead:t.remarkInfo.remark||"口味 偏好"},on:{click:function(e){return t.$router.push("/Remark")}}}),s("Cartitem",{attrs:{title:"发票信息",subHead:"不需要要发票"}})],1),s("Tableware",{attrs:{isShow:t.showTableware},on:{close:function(e){t.showTableware=!1}}})],1),s("footer",{staticClass:"action-bar"},[s("span",[t._v("¥"+t._s(t.totalPrice))]),s("button",{on:{click:t.handlePay}},[t._v("去支付")])])],1)},qs=[],Qs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"checkout-section"},[s("div",{staticClass:"delivery"},[s("div",{staticClass:"delivery-left"},[s("span",{staticClass:"delivery-time"},[t._v("送达时间")]),s("div",{staticClass:"delivery-extra"},[s("span",[t._v(t._s(t.shopInfo.delivery_mode.text))])])]),s("div",{staticClass:"delivery-right"},[s("span",{staticClass:"delivery-select"},[t._v("尽快送达("+t._s(t.deliveryTime(t.shopInfo.order_lead_time)))]),s("i",{staticClass:"fa fa-angle-right"})])]),t._m(0)])])},Xs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart-item"},[s("div",{staticClass:"cart-item-title"},[t._v(" 支付方式 ")]),s("div",{staticClass:"pay-text"},[t._v(" 在线支付 ")])])}],Zs={name:"Delivery",props:{shopInfo:Object},methods:{deliveryTime:function(t){var e=new Date;return e.setMinutes(e.getMinutes()+t),e.getHours()+":"+e.getMinutes()}}},ta=Zs,ea=(s("c698"),Object(c["a"])(ta,Qs,Xs,!1,null,"3515a3b6",null)),sa=ea.exports,aa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"checkout-section"},[s("section",{staticClass:"checkout-section cart-group"},[s("h3",[t._v(t._s(t.orderInfo.shopInfo.name))]),s("ul",[t._l(t.orderInfo.selectFoods,(function(e,a){return s("li",{key:a},[s("img",{attrs:{src:e.image_path,alt:""}}),s("div",{staticClass:"cart-group-info"},[s("span",[t._v(t._s(e.name))]),s("span",[t._v("x"+t._s(e.count))]),s("span",[t._v(t._s(e.activity.fixed_price))])])])})),s("li",{staticClass:"cart-group-total"},[s("div",[t._v("配送费")]),s("div",[t._v("¥"+t._s(t.orderInfo.shopInfo.float_delivery_fee))])]),s("li",{staticClass:"cart-group-total"},[s("div",{staticClass:"discounts"}),s("div",{staticClass:"subtotal"},[s("span",[t._v("小计 ¥")]),s("span",{staticClass:"price"},[t._v(" "+t._s(t.totalPrice)+" ")])])])],2)])])},na=[],ia={name:"checkout-section",props:{orderInfo:Object,totalPrice:Number},created:function(){console.log(this.orderInfo)}},oa=ia,ra=(s("c9ac"),Object(c["a"])(oa,aa,na,!1,null,"90dc6e38",null)),ca=ra.exports,la=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart-item",on:{click:function(e){return t.$emit("click")}}},[s("div",{staticClass:"cart-item-title"},[t._v(t._s(t.title))]),t.subHead?s("div",{staticClass:"cart-item-right"},[s("span",[t._v(t._s(t.subHead))]),s("i",{staticClass:"fa fa-angle-right"})]):t._e()])},da=[],ua={name:"Cartitem",props:{title:String,subHead:String}},fa=ua,ha=(s("6377"),Object(c["a"])(fa,la,da,!1,null,"65963c7a",null)),pa=ha.exports,ma=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",[t.isShow?s("div",{staticClass:"tableware"},[s("div",{staticClass:"actions-sheet"},[s("i",{staticClass:"fa fa-remove",on:{click:function(e){return t.$emit("close")}}}),s("h2",{staticClass:"actions-sheet-header"},[s("span",{staticClass:"tag"}),s("span",{staticClass:"title"},[t._v("餐具份数")]),s("span",{staticClass:"tag"})]),s("ul",t._l(t.tablewareList,(function(e,a){return s("li",{key:a,class:{selected:t.selectItem==e},on:{click:function(s){return t.clickItem(e)}}},[t._v(" "+t._s(e)+" ")])})),0)])]):t._e()])},va=[],_a={name:"tableware",data:function(){return{tablewareList:["1","2","3","4","5","6"],selectItem:""}},props:{isShow:Boolean},methods:{clickItem:function(t){this.selectItem=t,this.$emit("close"),this.$store.dispatch("setRemark_info",{tableware:t+"份餐具",remark:this.$store.getters.remarkInfo.remark})}}},Ca=_a,ga=(s("706a"),Object(c["a"])(Ca,ma,va,!1,null,null,null)),ba=ga.exports,ya={name:"settlement",beforeRouteEnter:function(t,e,s){s((function(t){t.userInfo||t.getDate()}))},methods:{addAddress:function(){this.$router.push({name:"addAddress",params:{title:"添加地址",addressInfo:{name:"",sex:"",bottom:"",tag:"",address:"",phone:""}}})},getDate:function(){var t=this;this.$axios("/api/user/user_info/".concat(localStorage.ele_login)).then((function(e){e.data.myAddress.length>0?t.haveAddress=!0:t.haveAddress=!1}))},handlePay:function(){this.userInfo?this.$router.push("/Pay"):Object(T["Toast"])({message:"为选择收货地址",position:"bottom",duration:5e3})}},data:function(){return{haveAddress:!1,showTableware:!1}},components:{Header:gt,Delivery:sa,CartGroup:ca,Cartitem:pa,Tableware:ba},computed:{userInfo:function(){return this.$store.getters.userInfo},orderInfo:function(){return this.$store.getters.order_info},totalPrice:function(){return this.$store.getters.totalPrice},remarkInfo:function(){return this.$store.getters.remarkInfo}}},Ia=ya,ka=(s("d53f"),Object(c["a"])(Ia,Js,qs,!1,null,"ea75770a",null)),wa=ka.exports,xa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"remark"},[s("Header",{attrs:{isLeft:!0,title:"订单备注"}}),s("div",{staticClass:"view-body"},[s("section",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{placeholder:"填写额外信息",maxlength:"100"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),s("div",{staticClass:"switch"},t._l(t.radioItem,(function(e,a){return s("span",{key:a,staticClass:"switch-item",class:{selected:e.select},on:{click:function(s){return t.handleRadioItem(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0),t._l(t.switchItem,(function(e,a){return s("div",{key:a,staticClass:"switch"},[s("span",{staticClass:"switch-item",class:{selected:e.select},on:{click:function(t){e.select=!e.select}}},[t._v(t._s(e.name))])])}))],2),s("button",{staticClass:"btn-submit",on:{click:t.submitClick}},[t._v(" 确定 ")])])],1)},$a=[],Sa={name:"remark",data:function(){return{radioItem:[{select:!1,name:"不要辣"},{select:!1,name:"少点辣"},{select:!1,name:"多点辣"}],switchItem:[{select:!1,name:"不要香菜"},{select:!1,name:"不要洋葱"},{select:!1,name:"多点醋"},{select:!1,name:"多点葱花"}],text:""}},components:{Header:gt},methods:{handleRadioItem:function(t){this.radioItem.forEach((function(t){t.select=!1})),t.select=!0},submitClick:function(){var t="";this.radioItem.forEach((function(e){e.select&&(t+=e.name+",")})),this.switchItem.forEach((function(e){e.select&&(t+=e.name+",")})),t+=this.text,this.$store.dispatch("setRemark_info",{tableware:this.$store.getters.remarkInfo.tableware,remark:t}),this.$router.go(-1)}}},Ea=Sa,Oa=(s("7203"),Object(c["a"])(Ea,xa,$a,!1,null,"68d2ff8c",null)),Aa=Oa.exports,Da=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay"},[s("Header",{attrs:{title:"在线支付"}}),t.orderInfo?s("div",{staticClass:"main"},[s("div",{staticClass:"tip"},[s("p",{staticClass:"countdown-title"},[t._v(" 支付剩余时间 ")]),s("h3",{staticClass:"countdown-text"},[t._v(" "+t._s(t.countDown)+" ")])]),s("section",{staticClass:"home"},[s("ul",{staticClass:"list info-list"},[s("li",[s("span",{staticClass:"order-name"},[t._v(" "+t._s(t.orderInfo.shopInfo.name)+" ")]),s("span",{staticClass:"text-highlight"},[t._v(" ¥"+t._s(t.totalPrice)+" ")])])]),s("div",{staticClass:"title"},[t._v("在线支付")]),t._m(0)]),s("button",{staticClass:"btn-submit",attrs:{disabled:t.timeOut},on:{click:t.addOrder}},[t._v(" 确定支付 ")])]):t._e()],1)},Ta=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"list payment-list"},[a("li",{staticClass:"payment-list-item"},[a("div",{staticClass:"icon"},[a("img",{attrs:{src:s("68de"),alt:""}}),a("span",[t._v("微信")])]),a("i",{staticClass:"fa fa-check-circle selected"})])])}],ja={name:"Pay",components:{Header:gt},beforeRouteEnter:function(t,e,s){s((function(t){t.countTimeDown()}))},data:function(){return{countDown:"00:15:00",timer:null,timeOut:!1}},computed:{orderInfo:function(){return this.$store.getters.order_info},totalPrice:function(){return this.$store.getters.totalPrice},userInfo:function(){return this.$store.getters.userInfo},remarkInfo:function(){return this.$store.getters.remarkInfo}},methods:{countTimeDown:function(){var t=this,e=14,s=59;this.timer=setInterval((function(){if(s--,"00"==s&&"00"==e)return t.countDown="订单已超时",clearInterval(t.timer),void(t.timeOut=!0);"00"==s&&(s=59,e--,e<10&&(e="0"+e)),s<10&&(s="0"+s),t.countDown="00:"+e+":"+s}),1e3)},addOrder:function(){var t=this,e={orderInfo:this.orderInfo,totalPrice:this.totalPrice,userInfo:this.userInfo,remarkInfo:this.remarkInfo};this.$axios.post("/api/user/add_order/".concat(localStorage.ele_login),e).then((function(e){t.$router.push("/order")}))}}},La=ja,Pa=(s("d81c"),Object(c["a"])(La,Da,Ta,!1,null,"2f5652a7",null)),Fa=Pa.exports,Ma=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderInfo"},[s("Header",{attrs:{title:"订单详情",isLeft:!0}}),t.orderDetail?s("div",{staticClass:"view-body"},[t._m(0),s("div",{staticClass:"restaurant-card"},[t.orderDetail.orderInfo?s("CartGroup",{attrs:{orderInfo:t.orderDetail.orderInfo,totalPrice:t.orderDetail.totalPrice}}):t._e()],1),s("div",{staticClass:"detail-card"},[s("div",{staticClass:"title"},[t._v("配送信息")]),s("ul",{staticClass:"card-list"},[s("li",{staticClass:"list-item"},[s("span",[t._v("送达时间:")]),t._v(" "+t._s(t.orderDetail.date)+" ")]),s("li",{staticClass:"list-item"},[s("span",[t._v("送货地址:")]),s("div",{staticClass:"content"},[s("span",[t._v(" "+t._s(t.orderDetail.userInfo.name)+" "+t._s(t.orderDetail.userInfo.sex)+" ")]),s("span",[t._v(" "+t._s(t.orderDetail.userInfo.phone)+" "),s("span",[t._v(" "+t._s(t.orderDetail.userInfo.address)+" "+t._s(t.orderDetail.userInfo.bottom)+" ")])])])])])]),s("div",{staticClass:"detail-card"},[s("div",{staticClass:"title"},[t._v("订单信息")]),s("ul",{staticClass:"card-list"},[s("li",{staticClass:"list-item"},[s("span",[t._v("订单号:")]),t._v(" "+t._s(t.orderDetail._id)+" ")]),t._m(1),s("li",{staticClass:"list-item"},[s("span",[t._v("下单时间:")]),t._v(" "+t._s(t.orderDetail.date)+" ")]),s("li",{staticClass:"list-item"},[s("span",[t._v("订单备注:")]),t.orderDetail.remarkInfo.remark?s("span",{staticClass:"remark"},[t._v(" "+t._s(t.orderDetail.remarkInfo.remark)+"/"+t._s(t.orderDetail.remarkInfo.tableware)+" ")]):t._e()])])])]):t._e()],1)},Ra=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"status-head"},[s("div",{staticClass:"status-text"},[t._v(" 订单已送达 ")]),s("div",{staticClass:"status-title"},[t._v(" 感谢您对汉堡王的信任，期待再次光临 ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"list-item"},[s("span",[t._v("支付方式:")]),t._v(" 在线支付 ")])}],Na={name:"orderInfo",data:function(){return{orderDetail:{}}},beforeRouteEnter:function(t,e,s){s((function(e){e.orderDetail=t.params.order,console.log(t.params.order)}))},components:{Header:gt,CartGroup:ca}},Ha=Na,Ba=(s("295f"),Object(c["a"])(Ha,Ma,Ra,!1,null,"f2d2f40a",null)),Va=Ba.exports;a["default"].use(u["a"]);var Ga=[{path:"/",component:k,children:[{path:"/",redirect:"/home"},{name:"home",path:"/home",component:ut},{name:"Order",path:"/order",component:kt},{name:"Me",path:"/me",component:Ot},{name:"address",path:"/address",component:Bt},{name:"city",path:"/city",component:te},{name:"search",path:"/search",component:fe},{name:"shop",path:"/shop",component:Fe,redirect:"/goods",children:[{name:"goods",path:"/goods",component:os},{name:"comments",path:"/comments",component:fs},{name:"seller",path:"/seller",component:Cs}]}]},{path:"/login",name:"login",component:M},{name:"myAddress",path:"/myAddress",component:ws},{name:"addAddress",path:"/addAddress",component:Ys},{name:"Settlement",path:"/Settlement",component:wa},{name:"Remark",path:"/Remark",component:Aa},{name:"Pay",path:"/Pay",component:Fa},{name:"orderInfo",path:"/orderInfo",component:Va}],Ua=new u["a"]({mode:"history",base:"/",linkActiveClass:"active",routes:Ga});Ua.beforeEach((function(t,e,s){var a=!!localStorage.ele_login;"/login"==t.path||a?s():s("/login")}));var za,Ka=Ua,Wa=s("ade3"),Ya=s("2f62");a["default"].use(Ya["a"]);var Ja={SET_LOCATION:"SET_LOCATION",SET_ADDRESS:"SET_ADDRESS",ORDER_INFO:"ORDER_INFO",USER_INFO:"USER_INFO",REMARK_INFO:"REMARK_INFO"},qa={location:{},adderss:"",order_info:null,userInfo:null,remarkInfo:{tableware:"",remark:""}},Qa={location:function(t){return t.location},address:function(t){return t.adderss},order_info:function(t){return t.order_info},userInfo:function(t){return t.userInfo},totalPrice:function(t){var e=0;if(t.order_info){var s=t.order_info.selectFoods;s.forEach((function(t){e+=t.activity.fixed_price*t.count})),e+=t.order_info.shopInfo.float_delivery_fee,console.log(e)}return e},remarkInfo:function(t){return t.remarkInfo}},Xa=(za={},Object(Wa["a"])(za,Ja.SET_LOCATION,(function(t,e){t.location=e||null})),Object(Wa["a"])(za,Ja.SET_ADDRESS,(function(t,e){t.adderss=e||""})),Object(Wa["a"])(za,Ja.ORDER_INFO,(function(t,e){t.order_info=e||null})),Object(Wa["a"])(za,Ja.USER_INFO,(function(t,e){t.userInfo=e||null})),Object(Wa["a"])(za,Ja.REMARK_INFO,(function(t,e){t.remarkInfo=e||""})),za),Za={setLocation:function(t,e){var s=t.commit;s(Ja.SET_LOCATION,e)},setAddress:function(t,e){var s=t.commit;s(Ja.SET_ADDRESS,e)},setOrder_info:function(t,e){var s=t.commit;s(Ja.ORDER_INFO,e)},setUser_info:function(t,e){var s=t.commit;s(Ja.USER_INFO,e)},setRemark_info:function(t,e){var s=t.commit;s(Ja.REMARK_INFO,e)}},tn=new Ya["a"].Store({state:qa,getters:Qa,mutations:Xa,actions:Za}),en=s("bc3a"),sn=s.n(en),an=(s("aa35"),s("4328")),nn=s.n(an);a["default"].use(j.a),a["default"].config.productionTip=!1,a["default"].prototype.$axios=sn.a,sn.a.defaults.baseURL="https://ele-interface.herokuapp.com/",sn.a.interceptors.request.use((function(t){return"post"==t.method&&(t.data=nn.a.stringify(t.data)),T["Indicator"].open(),t}),(function(t){return Promise.reject((function(t){console.log(t)}))})),sn.a.interceptors.response.use((function(t){return T["Indicator"].close(),t}),(function(t){return Promise.reject((function(t){console.log(t)}))})),new a["default"]({router:Ka,store:tn,render:function(t){return t(d)}}).$mount("#app")},"59b3":function(t,e,s){"use strict";var a=s("9b47"),n=s.n(a);n.a},"59da":function(t,e,s){"use strict";var a=s("6573"),n=s.n(a);n.a},"5b91":function(t,e,s){},"5dcd":function(t,e,s){},6377:function(t,e,s){"use strict";var a=s("b7d9"),n=s.n(a);n.a},6573:function(t,e,s){},"68de":function(t,e,s){t.exports=s.p+"img/wechart.0055285e.jpg"},6925:function(t,e,s){},"6ba6":function(t,e,s){},"6e6c":function(t,e,s){"use strict";var a=s("6ba6"),n=s.n(a);n.a},"6f14":function(t,e,s){"use strict";var a=s("1bdc"),n=s.n(a);n.a},"6fdd":function(t,e,s){"use strict";var a=s("a6f7"),n=s.n(a);n.a},"706a":function(t,e,s){"use strict";var a=s("a4f5"),n=s.n(a);n.a},"719e":function(t,e,s){},7203:function(t,e,s){"use strict";var a=s("411b"),n=s.n(a);n.a},"78c9":function(t,e,s){},"84a9":function(t,e,s){},"85ec":function(t,e,s){},"87ad":function(t,e,s){},"8bc5":function(t,e,s){},9e3:function(t,e,s){},"9b47":function(t,e,s){},a0d4:function(t,e,s){},a1a7:function(t,e,s){},a3c1:function(t,e,s){"use strict";var a=s("4287"),n=s.n(a);n.a},a4f5:function(t,e,s){},a6f7:function(t,e,s){},a9f3:function(t,e,s){},af5b:function(t,e,s){"use strict";var a=s("a0d4"),n=s.n(a);n.a},b328:function(t,e,s){"use strict";var a=s("fe8c"),n=s.n(a);n.a},b640:function(t,e,s){t.exports=s.p+"img/logo.87ab03f8.jpg"},b78d:function(t,e,s){"use strict";var a=s("0ebd"),n=s.n(a);n.a},b7d9:function(t,e,s){},b7ea:function(t,e,s){"use strict";var a=s("5dcd"),n=s.n(a);n.a},b853:function(t,e,s){"use strict";var a=s("6925"),n=s.n(a);n.a},bd42:function(t,e,s){},c2be:function(t,e,s){},c614:function(t,e,s){"use strict";var a=s("c6bb"),n=s.n(a);n.a},c634:function(t,e,s){"use strict";var a=s("c2be"),n=s.n(a);n.a},c698:function(t,e,s){"use strict";var a=s("78c9"),n=s.n(a);n.a},c6bb:function(t,e,s){},c9ac:function(t,e,s){"use strict";var a=s("f7b9"),n=s.n(a);n.a},cc9a:function(t,e,s){},d2f0:function(t,e,s){},d312:function(t,e,s){},d53f:function(t,e,s){"use strict";var a=s("8bc5"),n=s.n(a);n.a},d81c:function(t,e,s){"use strict";var a=s("fee2"),n=s.n(a);n.a},d89c:function(t,e,s){"use strict";var a=s("ec21"),n=s.n(a);n.a},df58:function(t,e,s){"use strict";var a=s("00b4"),n=s.n(a);n.a},e556:function(t,e,s){"use strict";var a=s("e58e"),n=s.n(a);n.a},e58e:function(t,e,s){},e5f1:function(t,e,s){"use strict";var a=s("5b91"),n=s.n(a);n.a},eae8:function(t,e,s){},ec21:function(t,e,s){},eeb4:function(t,e,s){},f088:function(t,e,s){"use strict";var a=s("eae8"),n=s.n(a);n.a},f0a0:function(t,e,s){},f7b9:function(t,e,s){},fafa:function(t,e,s){"use strict";var a=s("0c15"),n=s.n(a);n.a},fe8c:function(t,e,s){},fee2:function(t,e,s){},ffff:function(t,e,s){"use strict";var a=s("a9f3"),n=s.n(a);n.a}});
//# sourceMappingURL=app.08f25c4c.js.map